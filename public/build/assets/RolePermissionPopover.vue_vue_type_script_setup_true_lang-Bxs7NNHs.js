import{_ as $}from"./index-CVhvq5ku.js";import{c as x,b as z,a as B,u as S,P as M}from"./useForwardPropsEmits-Cpafmfem.js";import{_ as K,u as L,a as T,b as U}from"./useFocusGuards-B0mf6IPP.js";import{a as V,r as W,u as C}from"./useForwardExpose-C1bx6149.js";import{d as v,J as N,D as O,g as m,o as f,w as u,r as g,u as e,H,I as j,e as h,l as _,i as D,q,y as G,c as J,k as Q,C as X,h as F,b as k,a as E,p as Y,F as Z,t as ee}from"./app-C9bd4Hsl.js";import{P as A,c as oe}from"./Primitive-DCUHJwjU.js";import{c as te,_ as se,a as ae,u as ne,b as ie}from"./Teleport-BbIVJwha.js";const[w,re]=x("PopoverRoot"),le=v({__name:"PopoverRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},modal:{type:Boolean,default:!1}},emits:["update:open"],setup(p,{emit:d}){const o=p,s=d,{modal:i}=N(o),n=V(o,"open",s,{defaultValue:o.defaultOpen,passive:o.open===void 0}),l=O(),r=O(!1);return re({contentId:"",triggerId:"",modal:i,open:n,onOpenChange:t=>{n.value=t},onOpenToggle:()=>{n.value=!n.value},triggerElement:l,hasCustomAnchor:r}),(t,a)=>(f(),m(e(K),null,{default:u(()=>[g(t.$slots,"default",{open:e(n)})]),_:3}))}}),de=v({__name:"PopoverPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(p){const d=p;return(o,s)=>(f(),m(e(te),H(j(d)),{default:u(()=>[g(o.$slots,"default")]),_:3},16))}}),I=v({__name:"PopoverContentImpl",props:{trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(p,{emit:d}){const o=p,s=d,i=z(W(o,"trapFocus","disableOutsidePointerEvents")),{forwardRef:n}=C(),l=w();return L(),(r,t)=>(f(),m(e(ae),{"as-child":"",loop:"",trapped:r.trapFocus,onMountAutoFocus:t[5]||(t[5]=a=>s("openAutoFocus",a)),onUnmountAutoFocus:t[6]||(t[6]=a=>s("closeAutoFocus",a))},{default:u(()=>[h(e(se),{"as-child":"","disable-outside-pointer-events":r.disableOutsidePointerEvents,onPointerDownOutside:t[0]||(t[0]=a=>s("pointerDownOutside",a)),onInteractOutside:t[1]||(t[1]=a=>s("interactOutside",a)),onEscapeKeyDown:t[2]||(t[2]=a=>s("escapeKeyDown",a)),onFocusOutside:t[3]||(t[3]=a=>s("focusOutside",a)),onDismiss:t[4]||(t[4]=a=>e(l).onOpenChange(!1))},{default:u(()=>[h(e(T),_(e(i),{id:e(l).contentId,ref:e(n),"data-state":e(l).open.value?"open":"closed","aria-labelledby":e(l).triggerId,style:{"--reka-popover-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-popover-content-available-width":"var(--reka-popper-available-width)","--reka-popover-content-available-height":"var(--reka-popper-available-height)","--reka-popover-trigger-width":"var(--reka-popper-anchor-width)","--reka-popover-trigger-height":"var(--reka-popper-anchor-height)"},role:"dialog"}),{default:u(()=>[g(r.$slots,"default")]),_:3},16,["id","data-state","aria-labelledby"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),pe=v({__name:"PopoverContentModal",props:{side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(p,{emit:d}){const o=p,s=d,i=w(),n=O(!1);ne(!0);const l=B(o,s),{forwardRef:r,currentElement:t}=C();return ie(t),(a,c)=>(f(),m(I,_(e(l),{ref:e(r),"trap-focus":e(i).open.value,"disable-outside-pointer-events":"",onCloseAutoFocus:c[0]||(c[0]=D(y=>{var P;s("closeAutoFocus",y),n.value||(P=e(i).triggerElement.value)==null||P.focus()},["prevent"])),onPointerDownOutside:c[1]||(c[1]=y=>{s("pointerDownOutside",y);const P=y.detail.originalEvent,b=P.button===0&&P.ctrlKey===!0,R=P.button===2||b;n.value=R}),onFocusOutside:c[2]||(c[2]=D(()=>{},["prevent"]))}),{default:u(()=>[g(a.$slots,"default")]),_:3},16,["trap-focus"]))}}),ue=v({__name:"PopoverContentNonModal",props:{side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(p,{emit:d}){const o=p,s=d,i=w(),n=O(!1),l=O(!1),r=B(o,s);return(t,a)=>(f(),m(I,_(e(r),{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:a[0]||(a[0]=c=>{var y;s("closeAutoFocus",c),c.defaultPrevented||(n.value||(y=e(i).triggerElement.value)==null||y.focus(),c.preventDefault()),n.value=!1,l.value=!1}),onInteractOutside:a[1]||(a[1]=async c=>{var b;s("interactOutside",c),c.defaultPrevented||(n.value=!0,c.detail.originalEvent.type==="pointerdown"&&(l.value=!0));const y=c.target;((b=e(i).triggerElement.value)==null?void 0:b.contains(y))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&l.value&&c.preventDefault()})}),{default:u(()=>[g(t.$slots,"default")]),_:3},16))}}),ce=v({__name:"PopoverContent",props:{forceMount:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(p,{emit:d}){const o=p,s=d,i=w(),n=B(o,s),{forwardRef:l}=C();return i.contentId||(i.contentId=S(void 0,"reka-popover-content")),(r,t)=>(f(),m(e(M),{present:r.forceMount||e(i).open.value},{default:u(()=>[e(i).modal.value?(f(),m(pe,_({key:0},e(n),{ref:e(l)}),{default:u(()=>[g(r.$slots,"default")]),_:3},16)):(f(),m(ue,_({key:1},e(n),{ref:e(l)}),{default:u(()=>[g(r.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),fe=v({__name:"PopoverTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(p){const d=p,o=w(),{forwardRef:s,currentElement:i}=C();return o.triggerId||(o.triggerId=S(void 0,"reka-popover-trigger")),q(()=>{o.triggerElement.value=i.value}),(n,l)=>(f(),m(G(e(o).hasCustomAnchor.value?e(A):e(U)),{"as-child":""},{default:u(()=>[h(e(A),{id:e(o).triggerId,ref:e(s),type:n.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":e(o).open.value,"aria-controls":e(o).contentId,"data-state":e(o).open.value?"open":"closed",as:n.as,"as-child":d.asChild,onClick:e(o).onOpenToggle},{default:u(()=>[g(n.$slots,"default")]),_:3},8,["id","type","aria-expanded","aria-controls","data-state","as","as-child","onClick"])]),_:3}))}}),me=v({__name:"Popover",props:{defaultOpen:{type:Boolean},open:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(p,{emit:d}){const i=B(p,d);return(n,l)=>(f(),m(e(le),_({"data-slot":"popover"},e(i)),{default:u(()=>[g(n.$slots,"default")]),_:3},16))}}),ge=v({inheritAttrs:!1,__name:"PopoverContent",props:{forceMount:{type:Boolean},side:{},sideOffset:{default:4},align:{default:"center"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},disableOutsidePointerEvents:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(p,{emit:d}){const o=p,s=d,i=J(()=>{const{class:l,...r}=o;return r}),n=B(i,s);return(l,r)=>(f(),m(e(de),null,{default:u(()=>[h(e(ce),_({"data-slot":"popover-content"},{...e(n),...l.$attrs},{class:e(oe)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md origin-(--reka-popover-content-transform-origin) outline-hidden",o.class)}),{default:u(()=>[g(l.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),ve=v({__name:"PopoverTrigger",props:{asChild:{type:Boolean},as:{}},setup(p){const d=p;return(o,s)=>(f(),m(e(fe),_({"data-slot":"popover-trigger"},d),{default:u(()=>[g(o.$slots,"default")]),_:3},16))}}),ye={class:"max-h-64 space-y-2 overflow-y-auto"},he=["id","checked","onChange"],_e=["for"],$e=v({__name:"RolePermissionPopover",props:{role:{},permissions:{}},setup(p){const d=p,o=O(!1),s=O({});Q(()=>d.role,r=>{s.value={},r.permissions&&r.permissions.forEach(t=>{s.value[t.id]=!0})},{immediate:!0});const i=X({roleId:0,permissions:{}});function n(r,t){s.value[r]=t}const l=()=>{o.value=!1,i.roleId=d.role.id,i.permissions=s.value,i.post(route("role-permissions"),{onSuccess:()=>{i.reset()}})};return(r,t)=>(f(),m(e(me),{open:o.value,"onUpdate:open":t[0]||(t[0]=a=>o.value=a)},{default:u(()=>[h(e(ve),{asChild:""},{default:u(()=>[h($,{variant:"outline",class:"flex items-center gap-2"},{default:u(()=>t[1]||(t[1]=[F(" Ver permisos ")])),_:1})]),_:1}),h(e(ge),{class:"w-64 space-y-3 p-4"},{default:u(()=>[k("div",ye,[(f(!0),E(Z,null,Y(r.permissions,a=>(f(),E("div",{key:a.id,class:"flex items-center space-x-2 rounded p-2 transition-colors hover:bg-gray-50"},[k("input",{class:"text-primary focus:ring-primary h-4 w-4 rounded border-gray-300",type:"checkbox",id:`permission-${a.id}`,checked:s.value[a.id]||!1,onChange:c=>n(a.id,c.target.checked)},null,40,he),k("label",{class:"cursor-pointer text-sm font-medium text-gray-700",for:`permission-${a.id}`},ee(a.name),9,_e)]))),128))]),h($,{onClick:l,class:"mt-2 w-full",disabled:!r.hasPermissionsChanged},{default:u(()=>t[2]||(t[2]=[F(" Sincronizar ")])),_:1},8,["disabled"])]),_:1})]),_:1},8,["open"]))}});export{$e as _};
