import{d as D,l as E,j as I,C as M,g as j,o as r,w as l,a as i,u as o,b as s,e as p,t as n,D as v,c as d,i as m,bP as B,F as y,p as h,bQ as L,n as P}from"./app-DWHuNo7n.js";import{_ as g}from"./index-DuM0-vUj.js";import{_ as O,a as U,b as z,c as F}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BOHsnt1N.js";import{_ as G}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BnNaLCf3.js";import{_ as T}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-dxQfTMza.js";import{c as q}from"./createLucideIcon-Cowez9VA.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=q("InfoIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),H={class:"flex-shrink-0 space-y-4 py-4"},Q={class:"space-y-2"},R={class:"text-sm text-gray-600"},J={class:"space-y-2"},K=["value"],W={key:0,class:"text-sm text-red-600"},X={class:"space-y-2"},Y={key:0,class:"text-sm text-red-600"},Z={class:"min-h-0 flex-1 border-t pt-4"},ee={class:"max-h-[300px] overflow-y-auto pr-2"},se={key:0,class:"relative"},te={class:"text-xs font-bold text-white"},oe={class:"rounded-lg bg-gray-50 p-3 shadow-sm"},ae={class:"mb-1 flex items-start justify-between"},re={class:"text-sm font-medium"},ne={class:"text-xs text-gray-500"},le={key:0,class:"mt-1 text-sm text-gray-700"},ie={key:1,class:"mt-2 text-xs text-gray-500"},de={key:1,class:"py-8 text-center text-sm text-gray-500"},ge=D({__name:"ChangeStatusModal",props:{staff:{type:Object,required:!0}},emits:["save","update:open"],setup(u,{emit:k}){var _;const x=u,w=E(),C=k,b=I(!1),S={0:"Lista negra",1:"En proceso",2:"Contratado",3:"Cesado",4:"Retirado",5:"Abandono",6:"Cumplió Contrato"},a=M({staff_id:x.staff.id,status:x.staff.current_status,observation:"",user_id:(_=w.props.auth.user)==null?void 0:_.id}),$=()=>{a.post(route("staff.update-status"),{onSuccess:()=>{C("save"),a.reset()}})},N=c=>new Date(c).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),V=c=>({0:"bg-red-500",1:"bg-yellow-500",2:"bg-green-500",3:"bg-gray-500",4:"bg-blue-500",5:"bg-orange-500",6:"bg-purple-500"})[c]||"bg-gray-500";return(c,e)=>(r(),j(o(F),{open:b.value,"onUpdate:open":e[3]||(e[3]=t=>b.value=t)},{default:l(()=>[i(o(T),{"as-child":""},{default:l(()=>[i(g,{variant:"ghost",size:"icon",class:"cursor-pointer text-green-600 hover:text-green-800"},{default:l(()=>[i(o(A),{class:"h-4 w-4"})]),_:1})]),_:1}),i(o(O),{class:"flex max-h-[90vh] flex-col sm:max-w-[800px]"},{default:l(()=>[i(o(U),null,{default:l(()=>[i(o(z),null,{default:l(()=>e[4]||(e[4]=[p("Cambiar Estado del Personal")])),_:1})]),_:1}),s("div",H,[s("div",Q,[e[5]||(e[5]=s("label",{class:"text-sm font-medium"},"Personal",-1)),s("p",R,n(u.staff.name),1)]),s("div",J,[e[6]||(e[6]=s("label",{for:"status",class:"text-sm font-medium"},"Nuevo Estado",-1)),v(s("select",{id:"status","onUpdate:modelValue":e[0]||(e[0]=t=>o(a).status=t),class:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none"},[(r(),d(y,null,h(S,(t,f)=>s("option",{key:f,value:f},n(t),9,K)),64))],512),[[B,o(a).status]]),o(a).errors.status?(r(),d("p",W,n(o(a).errors.status),1)):m("",!0)]),s("div",X,[e[7]||(e[7]=s("label",{for:"observation",class:"text-sm font-medium"},"Observación",-1)),v(s("textarea",{id:"observation","onUpdate:modelValue":e[1]||(e[1]=t=>o(a).observation=t),rows:"3",placeholder:"Ingrese una observación sobre el cambio de estado...",class:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none"},null,512),[[L,o(a).observation]]),o(a).errors.observation?(r(),d("p",Y,n(o(a).errors.observation),1)):m("",!0)])]),s("div",Z,[e[9]||(e[9]=s("h3",{class:"mb-3 text-sm font-medium"},"Historial de Observaciones",-1)),s("div",ee,[u.staff.observations&&u.staff.observations.length>0?(r(),d("div",se,[e[8]||(e[8]=s("div",{class:"absolute top-0 bottom-0 left-[15px] w-0.5 bg-gray-200"},null,-1)),(r(!0),d(y,null,h(u.staff.observations,(t,f)=>(r(),d("div",{key:t.id,class:"relative pb-6 pl-10 last:pb-0"},[s("div",{class:P(["absolute top-1 left-0 flex h-8 w-8 items-center justify-center rounded-full border-4 border-white",V(t.status)])},[s("span",te,n(f+1),1)],2),s("div",oe,[s("div",ae,[s("span",re,n(t.user.name),1),s("span",ne,n(N(t.created_at)),1)]),t.observation?(r(),d("p",le,n(t.observation),1)):m("",!0),t.user_name?(r(),d("p",ie,"Por: "+n(t.user_name),1)):m("",!0)])]))),128))])):(r(),d("div",de,"No hay historial de cambios registrado"))])]),i(o(G),null,{default:l(()=>[i(g,{variant:"outline",onClick:e[2]||(e[2]=t=>b.value=!1)},{default:l(()=>e[10]||(e[10]=[p("Cancelar")])),_:1}),i(g,{type:"submit",onClick:$,disabled:o(a).processing},{default:l(()=>[p(n(o(a).processing?"Guardando...":"Guardar"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}});export{ge as _};
