import{u as c}from"./usePrimitiveElement-Bk3Uk5Hg.js";import{S as m}from"./Primitive-Cxt3wqNz.js";import{A as u,a7 as k,a3 as h,c as f,d as v,M as w,ag as x,a6 as p,k as T}from"./app-DZwmv7tr.js";const d="data-reka-collection-item";function j(M={}){const{key:A="",isProvider:y=!1}=M,s=`${A}CollectionProvider`;let e;if(y){const o=u(new Map);e={collectionRef:u(),itemMap:o},k(s,e)}else e=h(s);const C=(o=!1)=>{const t=e.collectionRef.value;if(!t)return[];const r=Array.from(t.querySelectorAll(`[${d}]`)),a=Array.from(e.itemMap.value.values()).sort((i,n)=>r.indexOf(i.ref)-r.indexOf(n.ref));return o?a:a.filter(i=>i.ref.dataset.disabled!=="")},E=v({name:"CollectionSlot",setup(o,{slots:t}){const{primitiveElement:r,currentElement:l}=c();return T(l,()=>{e.collectionRef.value=l.value}),()=>p(m,{ref:r},t)}}),I=v({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(o,{slots:t,attrs:r}){const{primitiveElement:l,currentElement:a}=c();return w(i=>{if(a.value){const n=x(a.value);e.itemMap.value.set(n,{ref:a.value,value:o.value}),i(()=>e.itemMap.value.delete(n))}}),()=>p(m,{...r,[d]:"",ref:l},t)}}),R=f(()=>Array.from(e.itemMap.value.values())),S=f(()=>e.itemMap.value.size);return{getItems:C,reactiveItems:R,itemMapSize:S,CollectionSlot:E,CollectionItem:I}}export{j as u};
