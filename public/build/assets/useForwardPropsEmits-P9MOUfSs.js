import{a1 as b,a6 as N,a7 as $,A as h,k as g,s as S,p as j,c as P,d as x,K as U,$ as I,a5 as k,a8 as F,a9 as w,aa as R}from"./app-DxcgBMGz.js";import{h as _,i as D,j as L}from"./useForwardExpose-CNBCTYCZ.js";import{r as K}from"./Primitive-Bt_N94gP.js";function B(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,i=Symbol(n);return[a=>{const s=b(i,a);if(s||s===null)return s;throw new Error(`Injection \`${i.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},a=>(N(i,a),a)]}const[V,ee]=B("ConfigProvider");let q=0;function te(t,e="reka"){const n=V({useId:void 0});return $?`${e}-${$()}`:n.useId?`${e}-${n.useId()}`:`${e}-${++q}`}function z(t,e){const n=h(t);function i(o){return e[n.value][o]??n.value}return{state:n,dispatch:o=>{n.value=i(o)}}}function H(t,e){var C;const n=h({}),i=h("none"),l=h(t),o=t.value?"mounted":"unmounted";let a;const s=((C=e.value)==null?void 0:C.ownerDocument.defaultView)??_,{state:d,dispatch:f}=z(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),m=r=>{var u;if(D){const v=new CustomEvent(r,{bubbles:!1,cancelable:!1});(u=e.value)==null||u.dispatchEvent(v)}};g(t,async(r,u)=>{var y;const v=u!==r;if(await S(),v){const E=i.value,p=A(e.value);r?(f("MOUNT"),m("enter"),p==="none"&&m("after-enter")):p==="none"||p==="undefined"||((y=n.value)==null?void 0:y.display)==="none"?(f("UNMOUNT"),m("leave"),m("after-leave")):u&&E!==p?(f("ANIMATION_OUT"),m("leave")):(f("UNMOUNT"),m("after-leave"))}},{immediate:!0});const c=r=>{const u=A(e.value),v=u.includes(r.animationName),y=d.value==="mounted"?"enter":"leave";if(r.target===e.value&&v&&(m(`after-${y}`),f("ANIMATION_END"),!l.value)){const E=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",a=s==null?void 0:s.setTimeout(()=>{var p;((p=e.value)==null?void 0:p.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=E)})}r.target===e.value&&u==="none"&&f("ANIMATION_END")},M=r=>{r.target===e.value&&(i.value=A(e.value))},O=g(e,(r,u)=>{r?(n.value=getComputedStyle(r),r.addEventListener("animationstart",M),r.addEventListener("animationcancel",c),r.addEventListener("animationend",c)):(f("ANIMATION_END"),a!==void 0&&(s==null||s.clearTimeout(a)),u==null||u.removeEventListener("animationstart",M),u==null||u.removeEventListener("animationcancel",c),u==null||u.removeEventListener("animationend",c))},{immediate:!0}),T=g(d,()=>{const r=A(e.value);i.value=d.value==="mounted"?r:"none"});return j(()=>{O(),T()}),{isPresent:P(()=>["mounted","unmountSuspended"].includes(d.value))}}function A(t){return t&&getComputedStyle(t).animationName||"none"}const ne=x({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){var f;const{present:i,forceMount:l}=U(t),o=h(),{isPresent:a}=H(i,o);n({present:a});let s=e.default({present:a.value});s=K(s||[]);const d=I();if(s&&(s==null?void 0:s.length)>1){const m=(f=d==null?void 0:d.parent)!=null&&f.type.name?`<${d.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${m}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(c=>`  - ${c}`).join(`
`)].join(`
`))}return()=>l.value||i.value||a.value?k(e.default({present:a.value})[0],{ref:m=>{const c=L(m);return typeof(c==null?void 0:c.hasAttribute)>"u"||(c!=null&&c.hasAttribute("data-reka-popper-content-wrapper")?o.value=c.firstElementChild:o.value=c),c}}):null}});function Y(t){const e=I(),n=e==null?void 0:e.type.emits,i={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${e==null?void 0:e.type.__name}`),n==null||n.forEach(l=>{i[F(w(l))]=(...o)=>t(l,...o)}),i}function ae(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function G(t){const e=I(),n=Object.keys((e==null?void 0:e.type.props)??{}).reduce((l,o)=>{const a=(e==null?void 0:e.type.props[o]).default;return a!==void 0&&(l[o]=a),l},{}),i=R(t);return P(()=>{const l={},o=(e==null?void 0:e.vnode.props)??{};return Object.keys(o).forEach(a=>{l[w(a)]=o[a]}),Object.keys({...n,...l}).reduce((a,s)=>(i.value[s]!==void 0&&(a[s]=i.value[s]),a),{})})}function se(t,e){const n=G(t),i=e?Y(e):{};return P(()=>({...n.value,...i}))}export{ne as P,se as a,G as b,B as c,Y as d,ae as g,V as i,te as u};
