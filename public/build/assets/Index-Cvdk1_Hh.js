import{_ as H}from"./index-9YcjXmA1.js";import{_ as S,a as y,b as h,c as g,d as w,e as $,f as D}from"./SelectValue.vue_vue_type_script_setup_true_lang-Bmy2KY7z.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-DZm0pg90.js";import{d as z,l as r,n as E,q as G,c as m,o as i,a as e,u as a,m as J,w as o,b as k,e as n,F as p,k as V,g as b,t as A}from"./app-CgjMiM1G.js";import{_ as K}from"./Alert.vue_vue_type_script_setup_true_lang-DqukDw4U.js";import{_ as Q}from"./DatePicker.vue_vue_type_script_setup_true_lang-CJ_7Dqfs.js";import{_ as W}from"./DinnersTable.vue_vue_type_script_setup_true_lang-DhVxBA9y.js";import{_ as X}from"./ExcelDialog.vue_vue_type_script_setup_true_lang-KTvHuU2G.js";import{_ as Y}from"./OtherUnitDialog.vue_vue_type_script_setup_true_lang-BCodImFz.js";import{_ as Z}from"./PricesDialog.vue_vue_type_script_setup_true_lang-BaG_fQPD.js";import{_ as ee}from"./SalesCard.vue_vue_type_script_setup_true_lang-3eqRl0SM.js";import{_ as le}from"./SalesTable.vue_vue_type_script_setup_true_lang-DjXI3X4H.js";import{c as te}from"./createLucideIcon-DEwhuiXi.js";import"./utils-bRKmu4jq.js";import"./index-dkW4UkYo.js";import"./Primitive-D77enw2v.js";import"./useForwardPropsEmits-GOXOsDE4.js";import"./index-YX76zy1a.js";import"./Teleport-BU5N8ouh.js";import"./useForwardExpose-DFPIGb4L.js";import"./Collection-BUSmkRJj.js";import"./usePrimitiveElement-BHfGSrCQ.js";import"./check-DqYtSHQV.js";import"./utils-CCNSzSc2.js";import"./useFocusGuards-DI_TmAIv.js";import"./useTypeahead-DeJom6gr.js";import"./VisuallyHidden-xkqmy_Gs.js";import"./nullish-CHIgUVhi.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DKv5YMR3.js";import"./RovingFocusGroup-C_d_XICj.js";import"./x-OSRfj56p.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./building-2-kLWdJK63.js";import"./user-CUO8ojLw.js";import"./chevron-right-Cn1pIJAw.js";import"./chevron-left-CUdjZNk7.js";import"./CalendarPrevButton.vue_vue_type_script_setup_true_lang-C33XCnld.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-C_PI_DM1.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-D0PTN8Ah.js";import"./RovingFocusItem-C0STngjw.js";import"./Input.vue_vue_type_script_setup_true_lang-SyvBLw2x.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Bw-zCQxx.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-DInJHxHO.js";import"./dollar-sign-8fHrEanU.js";import"./Card.vue_vue_type_script_setup_true_lang-u2z8cqlN.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-DsI8Ax65.js";import"./TableCell.vue_vue_type_script_setup_true_lang-Dgs7oVpe.js";import"./SaleDetailsPopover.vue_vue_type_script_setup_true_lang-Bh_bY3vl.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=te("UserRoundPlusIcon",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M22 19h-6",key:"vcuq98"}]]),se={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},oe={class:"flex h-[40px] w-full items-center justify-start gap-1"},re={class:"grid auto-rows-min gap-4 md:grid-cols-2"},tl=z({__name:"Index",props:{dinners:{},services:{},units:{},cafes:{},sale_types:{},receipt_types:{},sales:{}},setup(I){const q=r(null),d=r(0),f=r(0),c=r([]),u=r([]),_=r(0);E().props.auth;const B=I,R=l=>u.value.some(t=>t.serviceID===l.id),M=l=>{if(R(l)){u.value=u.value.filter(t=>t.serviceID!==l.id);return}u.value.push({serviceID:l.id,quantity:l.quantity||1,price:l.quantity*l.pivot.price,code:l.code,name:l.name,unit_price:l.pivot.price,service_type:l.type})},T=r(!1),U=r(""),x=r(""),P=r(new Date),v=r(!1),C=r(!1),N=(l,t)=>{var s;U.value=((s=t.response)==null?void 0:s.data.message)||t||"Ha ocurrido un error inesperado.",x.value=l,T.value=!0},O=()=>{v.value=!0},j=()=>{C.value=!0,v.value=!1},F=l=>{P.value=l};return G(d,l=>{const t=B.cafes.find(s=>s.id===l);console.log(t),t?c.value=t.services:c.value=[]}),(l,t)=>(i(),m(p,null,[e(a(J),{title:"Comensales"}),e(L,null,{default:o(()=>[e(K,{showAlert:T.value,type:x.value,description:U.value},null,8,["showAlert","type","description"]),k("div",se,[k("div",oe,[e(a(S),{class:"w-full",modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=s=>_.value=s)},{default:o(()=>[e(a(y),null,{default:o(()=>[e(a(h),{placeholder:"Selecciona un tipo de documento"})]),_:1}),e(a(g),null,{default:o(()=>[e(a(w),null,{default:o(()=>[e(a($),null,{default:o(()=>t[3]||(t[3]=[n("Tipo de Documento")])),_:1}),(i(!0),m(p,null,V(l.receipt_types,s=>(i(),b(a(D),{value:s.id,key:s.id},{default:o(()=>[n(A(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(a(S),{class:"w-full",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s)},{default:o(()=>[e(a(y),null,{default:o(()=>[e(a(h),{placeholder:"Selecciona un tipo de venta"})]),_:1}),e(a(g),null,{default:o(()=>[e(a(w),null,{default:o(()=>[e(a($),null,{default:o(()=>t[4]||(t[4]=[n("Tipo de Venta")])),_:1}),(i(!0),m(p,null,V(l.sale_types,s=>(i(),b(a(D),{value:s.id,key:s.id},{default:o(()=>[n(A(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(a(S),{class:"w-full",modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=s=>d.value=s)},{default:o(()=>[e(a(y),null,{default:o(()=>[e(a(h),{placeholder:"Selecciona una cafetería"})]),_:1}),e(a(g),null,{default:o(()=>[e(a(w),null,{default:o(()=>[e(a($),null,{default:o(()=>t[5]||(t[5]=[n("Cafeterías Autorizadas")])),_:1}),(i(!0),m(p,null,V(l.cafes,s=>(i(),b(a(D),{value:s.id,key:s.id},{default:o(()=>[n(A(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Q,{onUpdateDate:F}),e(H,{class:"bg-blue-500"},{default:o(()=>[e(a(ae))]),_:1}),e(X),e(Z,{services:c.value},null,8,["services"]),e(Y,{showOtherUnitDialog:v.value,onDoublePriceSave:j},null,8,["showOtherUnitDialog"])]),k("div",re,[e(ee,{services:l.services,cafeSelected:d.value,saletypeSelected:f.value,servicesSelectedToSale:u.value,receiptType:_.value,doublePrice:C.value,dateSelected:P.value,onHandleShowAlert:N,onShowDialog:O,ref_key:"salesCardRef",ref:q},null,8,["services","cafeSelected","saletypeSelected","servicesSelectedToSale","receiptType","doublePrice","dateSelected"]),e(W,{dinners:l.dinners,services:c.value,onAddServiceSelected:M},null,8,["dinners","services"]),e(le,{sales:l.sales},null,8,["sales"])])])]),_:1})],64))}});export{tl as default};
