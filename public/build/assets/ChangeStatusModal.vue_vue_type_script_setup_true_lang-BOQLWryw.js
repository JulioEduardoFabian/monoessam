import{d as D,l as E,j as I,C as M,g as j,o as r,w as l,a as i,u as o,b as t,e as g,t as n,D as _,c as d,i as m,bP as B,F as y,p as h,bQ as L,n as P}from"./app-9tqjBHEs.js";import{_ as x}from"./index-Cssfem1N.js";import{_ as O,a as U,b as z,c as F}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DA8G7DBa.js";import{_ as G}from"./DialogFooter.vue_vue_type_script_setup_true_lang-B64sSsYp.js";import{_ as T}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-BLbnlLq5.js";import{c as q}from"./createLucideIcon-CqvkLLG1.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=q("InfoIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),H={class:"flex-shrink-0 space-y-4 py-4"},Q={class:"space-y-2"},R={class:"text-sm text-gray-600"},J={class:"space-y-2"},K=["value"],W={key:0,class:"text-sm text-red-600"},X={class:"space-y-2"},Y={key:0,class:"text-sm text-red-600"},Z={class:"min-h-0 flex-1 border-t pt-4"},ss={class:"max-h-[300px] overflow-y-auto pr-2"},ts={key:0,class:"relative"},es={class:"text-xs font-bold text-white"},os={class:"rounded-lg bg-gray-50 p-3 shadow-sm"},as={class:"mb-1 flex items-start justify-between"},rs={class:"text-sm font-medium"},ns={class:"text-xs text-gray-500"},ls={key:0,class:"mt-1 text-sm text-gray-700"},is={key:1,class:"mt-2 text-xs text-gray-500"},ds={key:1,class:"py-8 text-center text-sm text-gray-500"},gs=D({__name:"ChangeStatusModal",props:{staff:{type:Object,required:!0}},emits:["save","update:open"],setup(u,{emit:k}){var v;const b=u,w=E(),C=k,p=I(!1),S={0:"Lista negra",1:"En proceso",2:"Contratado",3:"Cesado",4:"Retirado",5:"Abandono",6:"Cumplió Contrato"},a=M({staff_id:b.staff.id,status:b.staff.status,observation:"",user_id:(v=w.props.auth.user)==null?void 0:v.id}),$=()=>{a.post(route("staff.update-status"),{onSuccess:()=>{C("save"),a.reset(),a.status=b.staff.status}})},N=c=>new Date(c).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),V=c=>({0:"bg-red-500",1:"bg-yellow-500",2:"bg-green-500",3:"bg-gray-500",4:"bg-blue-500",5:"bg-orange-500",6:"bg-purple-500"})[c]||"bg-gray-500";return(c,s)=>(r(),j(o(F),{open:p.value,"onUpdate:open":s[3]||(s[3]=e=>p.value=e)},{default:l(()=>[i(o(T),{"as-child":""},{default:l(()=>[i(x,{variant:"ghost",size:"icon",class:"cursor-pointer text-green-600 hover:text-green-800"},{default:l(()=>[i(o(A),{class:"h-4 w-4"})]),_:1})]),_:1}),i(o(O),{class:"flex max-h-[90vh] flex-col sm:max-w-[800px]"},{default:l(()=>[i(o(U),null,{default:l(()=>[i(o(z),null,{default:l(()=>s[4]||(s[4]=[g("Cambiar Estado del Personal")])),_:1})]),_:1}),t("div",H,[t("div",Q,[s[5]||(s[5]=t("label",{class:"text-sm font-medium"},"Personal",-1)),t("p",R,n(u.staff.name),1)]),t("div",J,[s[6]||(s[6]=t("label",{for:"status",class:"text-sm font-medium"},"Nuevo Estado",-1)),_(t("select",{id:"status","onUpdate:modelValue":s[0]||(s[0]=e=>o(a).status=e),class:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none"},[(r(),d(y,null,h(S,(e,f)=>t("option",{key:f,value:f},n(e),9,K)),64))],512),[[B,o(a).status]]),o(a).errors.status?(r(),d("p",W,n(o(a).errors.status),1)):m("",!0)]),t("div",X,[s[7]||(s[7]=t("label",{for:"observation",class:"text-sm font-medium"},"Observación",-1)),_(t("textarea",{id:"observation","onUpdate:modelValue":s[1]||(s[1]=e=>o(a).observation=e),rows:"3",placeholder:"Ingrese una observación sobre el cambio de estado...",class:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none"},null,512),[[L,o(a).observation]]),o(a).errors.observation?(r(),d("p",Y,n(o(a).errors.observation),1)):m("",!0)])]),t("div",Z,[s[9]||(s[9]=t("h3",{class:"mb-3 text-sm font-medium"},"Historial de Observaciones",-1)),t("div",ss,[u.staff.observations&&u.staff.observations.length>0?(r(),d("div",ts,[s[8]||(s[8]=t("div",{class:"absolute top-0 bottom-0 left-[15px] w-0.5 bg-gray-200"},null,-1)),(r(!0),d(y,null,h(u.staff.observations,(e,f)=>(r(),d("div",{key:e.id,class:"relative pb-6 pl-10 last:pb-0"},[t("div",{class:P(["absolute top-1 left-0 flex h-8 w-8 items-center justify-center rounded-full border-4 border-white",V(e.status)])},[t("span",es,n(f+1),1)],2),t("div",os,[t("div",as,[t("span",rs,n(e.user.name),1),t("span",ns,n(N(e.created_at)),1)]),e.observation?(r(),d("p",ls,n(e.observation),1)):m("",!0),e.user_name?(r(),d("p",is,"Por: "+n(e.user_name),1)):m("",!0)])]))),128))])):(r(),d("div",ds,"No hay historial de cambios registrado"))])]),i(o(G),null,{default:l(()=>[i(x,{variant:"outline",onClick:s[2]||(s[2]=e=>p.value=!1)},{default:l(()=>s[10]||(s[10]=[g("Cancelar")])),_:1}),i(x,{type:"submit",onClick:$,disabled:o(a).processing},{default:l(()=>[g(n(o(a).processing?"Guardando...":"Guardar"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}});export{gs as _};
