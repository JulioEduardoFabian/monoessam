import{_ as v}from"./index-CMN4QbaZ.js";import{_ as L}from"./Input.vue_vue_type_script_setup_true_lang-DRSESILD.js";import{c as P,_ as z,a as j,b as q}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BJj3Ap4R.js";import{_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-CXgHhOaT.js";import{d as V,k as u,c as i,o as n,a as r,u as o,m as D,w as d,b as e,e as S,F as p,l as h,v as m,t as c,W as y}from"./app-DKEoTMpc.js";import{_ as F}from"./AreaModal.vue_vue_type_script_setup_true_lang-qrZdPC__.js";import{_ as W}from"./Modal.vue_vue_type_script_setup_true_lang-B8CLJNsP.js";import{_ as G}from"./PermissionModal.vue_vue_type_script_setup_true_lang-KtM3_-Gk.js";import{_ as H}from"./RoleModal.vue_vue_type_script_setup_true_lang-BGr4Cid2.js";import{_ as O}from"./RolePermissionPopover.vue_vue_type_script_setup_true_lang-vHKTt3pG.js";import{c as C}from"./createLucideIcon-hE36bJB5.js";import{B as R}from"./building-DP3Fffp6.js";import{C as T}from"./coffee-CC809JHA.js";import{B as J}from"./building-2-mV2FzCNv.js";import"./utils-bRKmu4jq.js";import"./index-dkW4UkYo.js";import"./Primitive-DUPbyqgx.js";import"./index-CdUsTn8m.js";import"./useForwardPropsEmits-k1Br0vk_.js";import"./useForwardExpose-BBL0q8W0.js";import"./RovingFocusGroup-CdMI-jx8.js";import"./Collection-DcQ11Xg7.js";import"./usePrimitiveElement-DUNBj5zh.js";import"./RovingFocusItem-D9Wg5duj.js";import"./useFocusGuards-wtA7RTNu.js";import"./Teleport-CE_1jnLI.js";import"./VisuallyHidden-DUSEtLdG.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-gYTZ2BSm.js";import"./utils-CYzUh2JN.js";import"./useTypeahead-Bji-cTXX.js";import"./x-muJGhiII.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./user-Dq4vYeIV.js";import"./chevron-right-hQyYyoo_.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-tIGCwmCg.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-BqvQYW8J.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-8h0KAmsm.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DAZeDfjp.js";import"./chevron-down-DLthk-TS.js";import"./check-BQ4wUeCh.js";import"./nullish-CHIgUVhi.js";import"./SelectLabel.vue_vue_type_script_setup_true_lang-BHD4LKB_.js";import"./lamp-desk-XcGRDnBV.js";import"./user-plus-BcPgCApI.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-Z_gTblpi.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=C("BanIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=C("MapPinIcon",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=C("MountainIcon",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]),X={class:"flex h-full flex-1 flex-col gap-6 p-6"},Y={class:"flex h-12 w-full items-center justify-start gap-3 rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 p-2 shadow-sm dark:from-gray-700 dark:to-gray-700"},Z={class:"grid h-full auto-rows-fr gap-6 md:grid-cols-3"},ee={class:"flex flex-col gap-4 rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800"},te={class:"space-y-2 overflow-y-auto"},re=["onClick"],ae={class:"flex items-start gap-3 text-gray-700 dark:text-gray-200"},se={class:"min-w-0 flex-1"},oe={class:"truncate font-semibold text-gray-900 dark:text-white"},le={class:"mt-1 flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400"},ie={class:"max-w-[180px] truncate"},ne=["onClick"],de={class:"flex items-start gap-3 text-gray-700 dark:text-gray-200"},ce={class:"min-w-0 flex-1"},ue={class:"truncate font-semibold text-gray-900 dark:text-white"},ge={class:"mt-1 flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-gray-500 dark:text-gray-400"},pe={class:"inline-flex items-center gap-1.5"},me={class:"max-w-[120px] truncate"},fe={class:"inline-flex items-center gap-1.5"},be={class:"max-w-[100px] truncate"},xe={class:"flex flex-col gap-4 rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800"},he={class:"space-y-2 overflow-y-auto"},_e=["onClick"],ke={class:"font-medium text-gray-700 dark:text-gray-200"},ve={class:"flex flex-col gap-4 rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800"},ye={key:0,class:"flex h-14 items-center justify-center rounded-lg bg-red-100 p-3 text-red-600 dark:bg-red-900/30 dark:text-red-300"},we={key:1,class:"space-y-3 overflow-y-auto"},Ce=["onClick"],$e={class:"flex items-center justify-between"},Be={class:"font-medium text-gray-800 dark:text-gray-100"},je={class:"text-sm text-gray-500 dark:text-gray-400"},qe={class:"mt-2 flex justify-end gap-1"},vt=V({__name:"Index",props:{users:{},roles:{},permissions:{},areas:{},cafes:{},headquarters:{}},setup(Se){const $=u([]),f=u([]),b=u(!1),_=u(null),k=u(null),x=u(null),B=a=>{_.value=a,k.value=null,x.value=null,$.value=a.areas,f.value=[],b.value=!1},U=a=>{k.value=a,x.value=null,a.users.length!==0?(f.value=a.users.filter(s=>s.type!=3),b.value=!1):(f.value=[],b.value=!0)},M=a=>{x.value=a},E=a=>{confirm("¿Estás seguro de que deseas enviar a lista negra a este usuario?")&&y.get(route("blacklist",a))},I=a=>{confirm("¿Estás seguro de que deseas dar de baja a este usuario?")&&y.get(route("users.ban",a)).then(()=>{console.log("Usuario dado de baja")}).catch(s=>{console.error("Error al dar de baja al usuario:",s),alert("Ocurrió un error al dar de baja al usuario. Por favor, inténtalo de nuevo.")})},N=()=>{y.get(route("blacklist"))};return(a,s)=>(n(),i(p,null,[r(o(D),{title:"Usuarios"}),r(A,null,{default:d(()=>[e("div",X,[e("div",Y,[r(G,{class:"rounded p-1 text-blue-600 transition-colors hover:bg-blue-100 hover:text-blue-700 dark:text-blue-400 dark:hover:bg-blue-900/30"}),r(W,{cafes:a.cafes,headquarters:a.headquarters,roles:a.roles,class:"rounded p-1 text-purple-600 transition-colors hover:bg-purple-100 hover:text-purple-700 dark:text-purple-400 dark:hover:bg-purple-900/30"},null,8,["cafes","headquarters","roles"]),r(H,{areas:a.areas,class:"rounded p-1 text-green-600 transition-colors hover:bg-green-100 hover:text-green-700 dark:text-green-400 dark:hover:bg-green-900/30"},null,8,["areas"]),r(F,{cafes:a.cafes,headquarters:a.headquarters,class:"rounded p-1 text-orange-600 transition-colors hover:bg-orange-100 hover:text-orange-700 dark:text-orange-400 dark:hover:bg-orange-900/30"},null,8,["cafes","headquarters"]),r(v,{onClick:N},{default:d(()=>[r(o(w))]),_:1})]),e("div",Z,[e("div",ee,[s[2]||(s[2]=e("h2",{class:"text-lg font-semibold text-gray-800 dark:text-white"},[e("span",{class:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"},"Lugares")],-1)),s[3]||(s[3]=e("p",null,"Seleccione una sede o cafetería",-1)),r(L,{type:"text",class:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"Buscar lugar..."}),e("div",te,[r(o(P),{"default-value":"account",class:"w-full"},{default:d(()=>[r(o(z),{class:"grid w-full grid-cols-2 bg-gray-100 dark:bg-gray-700"},{default:d(()=>[r(o(j),{value:"areas",class:"data-[state=active]:bg-blue-500 data-[state=active]:text-white"},{default:d(()=>s[0]||(s[0]=[S(" Sedes ")])),_:1}),r(o(j),{value:"cafes",class:"data-[state=active]:bg-purple-500 data-[state=active]:text-white"},{default:d(()=>s[1]||(s[1]=[S(" Cafeterías ")])),_:1})]),_:1}),r(o(q),{value:"areas"},{default:d(()=>[(n(!0),i(p,null,h(a.headquarters,t=>{var l;return n(),i("div",{key:t.id,class:m(["my-1 flex h-14 cursor-pointer items-center rounded-lg border border-gray-200 p-3 transition-all hover:bg-blue-50 hover:shadow-md dark:border-gray-600 dark:hover:bg-blue-900/20",{"border-blue-300 bg-blue-100 dark:bg-blue-900/40":((l=_.value)==null?void 0:l.id)===t.id}]),onClick:g=>B(t)},[e("div",ae,[r(o(R),{class:"mt-0.5 h-5 w-5 flex-shrink-0 text-blue-600 dark:text-blue-400"}),e("div",se,[e("h3",oe,c(t.business.name),1),e("div",le,[r(o(K),{class:"h-4 w-4 opacity-70"}),e("span",ie,c(t.name),1)])])])],10,re)}),128))]),_:1}),r(o(q),{value:"cafes"},{default:d(()=>[(n(!0),i(p,null,h(a.cafes,t=>{var l;return n(),i("div",{key:t.id,class:m(["my-1 flex h-14 cursor-pointer items-center rounded-lg border border-gray-200 p-3 transition-all hover:bg-purple-50 hover:shadow-md dark:border-gray-600 dark:hover:bg-purple-900/20",{"border-purple-300 bg-purple-100 dark:bg-purple-900/40":((l=_.value)==null?void 0:l.id)===t.id}]),onClick:g=>B(t)},[e("div",de,[r(o(T),{class:"mt-0.5 h-5 w-5 flex-shrink-0 text-amber-600 dark:text-amber-400"}),e("div",ce,[e("h3",ue,c(t.name),1),e("div",ge,[e("span",pe,[r(o(J),{class:"h-4 w-4 opacity-70"}),e("span",me,c(t.unit.name),1)]),e("span",fe,[r(o(Q),{class:"h-4 w-4 opacity-70"}),e("span",be,c(t.unit.mine.name),1)])])])])],10,ne)}),128))]),_:1})]),_:1})])]),e("div",xe,[s[4]||(s[4]=e("h2",{class:"text-lg font-semibold text-gray-800 dark:text-white"},[e("span",{class:"bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent"},"Áreas")],-1)),e("div",he,[(n(!0),i(p,null,h($.value,t=>{var l;return n(),i("div",{key:t.id,class:m(["flex h-14 cursor-pointer items-center rounded-lg border border-gray-200 p-3 transition-all hover:bg-green-50 hover:shadow-md dark:border-gray-600 dark:hover:bg-green-900/20",{"border-green-300 bg-green-100 dark:bg-green-900/40":((l=k.value)==null?void 0:l.id)===t.id}]),onClick:g=>U(t)},[e("p",ke,c(t.name),1)],10,_e)}),128))])]),e("div",ve,[s[6]||(s[6]=e("h2",{class:"text-lg font-semibold text-gray-800 dark:text-white"},[e("span",{class:"bg-gradient-to-r from-orange-600 to-pink-600 bg-clip-text text-transparent"},"Usuarios")],-1)),b.value?(n(),i("div",ye,s[5]||(s[5]=[e("p",null,"No se encontraron usuarios en esta área",-1)]))):(n(),i("div",we,[(n(!0),i(p,null,h(f.value,t=>{var l;return n(),i("div",{key:t.id,class:m(["rounded-lg border border-gray-200 p-3 transition-all hover:shadow-md dark:border-gray-600",{"border-indigo-300 bg-indigo-50 dark:bg-indigo-900/30":((l=x.value)==null?void 0:l.id)===t.id}]),onClick:g=>M(t)},[e("div",$e,[e("div",null,[e("p",Be,c(t.name),1),e("p",je,c(t.email),1)]),e("span",{class:m(["rounded-full px-2 py-1 text-xs font-medium",{"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":t.roles[0].name==="Admin","bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":t.roles[0].name==="Manager","bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t.roles[0].name==="Employee","bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":t.roles[0].name==="Guest"}])},c(t.roles[0].name),3)]),e("div",qe,[r(v,{class:"bg-red-500",title:"Dar de baja",onClick:g=>I(t.id)},{default:d(()=>[r(o(w))]),_:2},1032,["onClick"]),r(v,{onClick:g=>E(t.id),title:"Pasar a lista negra"},{default:d(()=>[r(o(w))]),_:2},1032,["onClick"]),r(O,{role:t.roles[0],permissions:a.permissions,class:"text-xs text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300"},null,8,["role","permissions"])])],10,Ce)}),128))]))])])])]),_:1})],64))}});export{vt as default};
