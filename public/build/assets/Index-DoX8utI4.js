import{_ as U}from"./index-BxVuaeho.js";import{_ as h,a as $,b as g,c as w,d as k,e as V,f as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-LhXsuAIx.js";import{_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-DY8pThu8.js";import{d as N,l as r,n as j,q as F,c as p,o as n,a as e,u as s,m as H,w as o,b as f,e as d,F as _,k as A,g as b,t as I}from"./app-Dwep3gZ5.js";import{_ as L}from"./Alert.vue_vue_type_script_setup_true_lang-CUKNlVDp.js";import{_ as P}from"./DinnersTable.vue_vue_type_script_setup_true_lang-BnNYrjVd.js";import{_ as R}from"./ExcelDialog.vue_vue_type_script_setup_true_lang-BG-Lxn2p.js";import{_ as z}from"./PricesDialog.vue_vue_type_script_setup_true_lang-D6-_UNVg.js";import{_ as E}from"./SalesCard.vue_vue_type_script_setup_true_lang-BlQabIe5.js";import{c as G}from"./createLucideIcon-CF3jtnbJ.js";import"./utils-bRKmu4jq.js";import"./index-dkW4UkYo.js";import"./Primitive-Dwk-R57t.js";import"./useForwardPropsEmits-DEybKOJB.js";import"./index-CmqkYjOf.js";import"./Teleport-COaFilqP.js";import"./useForwardExpose-DRs4Qpiq.js";import"./Collection-BE28Nde9.js";import"./usePrimitiveElement-DpbTMZIY.js";import"./check-CtlSK5RZ.js";import"./utils-BLShA2Fs.js";import"./useFocusGuards-CBTBPD3u.js";import"./useTypeahead-B2Msw4wy.js";import"./VisuallyHidden-DUD6Zvku.js";import"./nullish-CHIgUVhi.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-jmO92Fav.js";import"./RovingFocusGroup-DJNeH26l.js";import"./x-COo-Hhhn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./building-2-BpY1f1Zx.js";import"./user-npjxwf2h.js";import"./chevron-right-H10ouq7_.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-C59W2X0N.js";import"./RovingFocusItem-By7SfBRo.js";import"./Input.vue_vue_type_script_setup_true_lang-DNMGk7SA.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-CFdTV-mj.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CS8p5Eox.js";import"./Card.vue_vue_type_script_setup_true_lang-CIAKBp7n.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=G("UserRoundPlusIcon",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M22 19h-6",key:"vcuq98"}]]),K={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},O={class:"flex h-[40px] w-full items-center justify-start gap-1"},Q={class:"grid auto-rows-min gap-4 md:grid-cols-2"},Me=N({__name:"Index",props:{dinners:{},services:{},units:{},cafes:{},sale_types:{}},setup(q){const u=r(0),m=r(0),c=r([]),i=r([]);j().props.auth;const T=q,B=a=>i.value.some(t=>t.serviceID===a.id),C=a=>{if(B(a)){i.value=i.value.filter(t=>t.serviceID!==a.id);return}i.value.push({serviceID:a.id,quantity:a.quantity||1,price:a.quantity*a.pivot.price})},v=r(!1),S=r(""),y=r(""),D=(a,t)=>{var l;S.value=((l=t.response)==null?void 0:l.data.message)||t||"Ha ocurrido un error inesperado.",y.value=a,v.value=!0};return F(u,a=>{const t=T.cafes.find(l=>l.id===a);console.log(t),t?c.value=t.services:c.value=[]}),(a,t)=>(n(),p(_,null,[e(s(H),{title:"Comensales"}),e(M,null,{default:o(()=>[e(L,{showAlert:v.value,type:y.value,description:S.value},null,8,["showAlert","type","description"]),f("div",K,[f("div",O,[e(s(h),{class:"w-full",modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=l=>m.value=l)},{default:o(()=>[e(s($),null,{default:o(()=>[e(s(g),{placeholder:"Selecciona un tipo de venta"})]),_:1}),e(s(w),null,{default:o(()=>[e(s(k),null,{default:o(()=>[e(s(V),null,{default:o(()=>t[2]||(t[2]=[d("Tipo de Venta")])),_:1}),(n(!0),p(_,null,A(a.sale_types,l=>(n(),b(s(x),{value:l.id,key:l.id},{default:o(()=>[d(I(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(s(h),{class:"w-full",modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=l=>u.value=l)},{default:o(()=>[e(s($),null,{default:o(()=>[e(s(g),{placeholder:"Selecciona una cafetería"})]),_:1}),e(s(w),null,{default:o(()=>[e(s(k),null,{default:o(()=>[e(s(V),null,{default:o(()=>t[3]||(t[3]=[d("Cafeterías Autorizadas")])),_:1}),(n(!0),p(_,null,A(a.cafes,l=>(n(),b(s(x),{value:l.id,key:l.id},{default:o(()=>[d(I(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{class:"bg-blue-500"},{default:o(()=>[e(s(J))]),_:1}),e(R),e(z,{services:c.value},null,8,["services"])]),f("div",Q,[e(E,{services:a.services,cafeSelected:u.value,saletypeSelected:m.value,servicesSelectedToSale:i.value,onHandleShowAlert:D},null,8,["services","cafeSelected","saletypeSelected","servicesSelectedToSale"]),e(P,{dinners:a.dinners,services:c.value,onAddServiceSelected:C},null,8,["dinners","services"])])])]),_:1})],64))}});export{Me as default};
